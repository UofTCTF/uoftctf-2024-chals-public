#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void get_input(char *dst) {
	size_t input_size;
	char *input_buffer;

	puts("Input size:");

	scanf("%lu[^\n]", &input_size);

	input_buffer = (char *)calloc(1, input_size);

	// hack that reads till the newline
	fgets(input_buffer, input_size, stdin);

	puts("Enter your input:");
	fgets(input_buffer, input_size, stdin);

	memcpy(dst, input_buffer, input_size);
	free(input_buffer);
}

int main() {
	printf("printf is at %p\n", printf);

	char buffer[64];

	puts("Hello give me an input");
	get_input(buffer);

	puts("I'm returning the input:");
	puts(buffer);

	return 0;
}
