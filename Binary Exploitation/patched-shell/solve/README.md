# Patched-Shell

This is just the continuation of basic-overflow.

Just like in basic-overflow, the buffer is the same size, but this time, `shell` calls `system` instead of `execve`.

There exists an issue with `system` that `execve` doesn't have.
When we call `system`, it requires that the stack is aligned to 16 bytes.
This stack alignment requirement exists in most
amd64 Linux systems, and it allows for SSE instructions to be used.

So how do we align the stack to 16 bytes? We can just make `main` return twice, effectively aligning the stack.

```
[ 0x40 bytes of buffer ][ old rbp ][ ret addr = ret instruction of main ][ ret addr = shell() ]
```

